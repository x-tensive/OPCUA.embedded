name: Build windows servers

on:
  workflow_dispatch:
    inputs:
      version:
        description: release version
        default: "github.event.inputs.name"
        required: true

jobs:
  build:
    runs-on: windows-latest
    steps:
    - name: checkout
      uses: actions/checkout@v3
      with:
        repository: "x-tensive/open62541-servers"
        ref: "master"
        # important! for submodules another secret key is used
        submodules: false
        ssh-key: ${{ secrets.OPEN62541_SERVERS_KEY }}
    - name: set git secret for submodules
      run: gh secret set STACK --body "${{ secrets.OPEN62541_STACK_KEY }}"
